(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function i(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function r(t,e){return t.get(a(t,e))}function o(t,e,n){return t.set(a(t,e),n),n}function a(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var s=new WeakMap,h=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,y=new WeakMap,p=new WeakMap,m=new WeakMap,d=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s,void 0),i(this,h,void 0),i(this,l,void 0),i(this,u,void 0),i(this,c,void 0),i(this,f,void 0),i(this,y,void 0),i(this,p,void 0),i(this,m,void 0),o(s,this,e),o(h,this,n),o(l,this,void 0),o(u,this,0),o(c,this,0),o(f,this,!1),o(y,this,0),o(p,this,0),o(m,this,"...")},(n=[{key:"setAssetsLoadedCount",value:function(t){o(p,this,t)}},{key:"setAssetsLimitCount",value:function(t){o(y,this,t)}},{key:"setLoadedAssetsText",value:function(t){o(m,this,t)}},{key:"complete",value:function(){var t=this;o(f,this,!0),setTimeout((function(){return t.stop()}),500)}},{key:"start",value:function(){var t=this,e=Array(parseInt(r(c,this))).fill(".").join(""),n="Đang tải".concat(e),i=r(s,this),a=i.width,d=i.height;r(c,this)>4&&o(c,this,0),o(c,this,r(c,this)+.1),r(h,this).fillStyle="rgb(0, 0, 0)",r(h,this).fillRect(0,0,a,d),r(h,this).save(),r(h,this).translate(a/2,d/2+70),r(h,this).rotate(r(u,this));for(var g=0;g<16;g++)r(h,this).beginPath(),r(h,this).rotate(2*Math.PI/16),r(h,this).moveTo(12,0),r(h,this).lineTo(30,0),r(h,this).lineWidth=2,r(h,this).strokeStyle="rgba(255, 255, 255, ".concat(g/16,")"),r(h,this).stroke();r(h,this).restore(),r(h,this).font="35px Arial",r(h,this).textAlign="center",r(h,this).textBaseline="middle",r(h,this).fillStyle="white",r(h,this).fillText(n,a/2,d/2),r(h,this).font="20px Arial",r(h,this).textAlign="right",r(h,this).textBaseline="bottom",r(h,this).fillStyle="white",r(h,this).fillText(r(f,this)?"Tải hoàn tất":"Đã tải: ".concat(r(m,this)," (").concat(r(p,this),"/").concat(r(y,this),")"),.97*a,.97*d),o(u,this,r(u,this)+.04),o(l,this,requestAnimationFrame((function(){return t.start()})))}},{key:"stop",value:function(){var t=r(s,this),e=t.width,n=t.height;cancelAnimationFrame(r(l,this)),r(h,this).clearRect(0,0,e,n)}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,w(i.key),i)}}function w(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}function b(t,e,n){k(t,e),e.set(t,n)}function k(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(t,e,n){return t.set(M(t,e),n),n}function x(t,e){return t.get(M(t,e))}function M(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var I=new WeakMap,P=new WeakMap,E=new WeakMap,j=new WeakMap,T=new WeakSet,W=function(){return t=function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,n=T),n.add(this),b(this,I,{images:{},json:{}}),b(this,P,0),b(this,E,0),b(this,j,void 0),this.assetLoadingInterface=e},(e=[{key:"loadImage",value:function(t,e){var n,i=this;S(P,this,(n=x(P,this),++n)),this.assetLoadingInterface.setAssetsLimitCount(x(P,this));var r=new Image;r.src=e,r.onload=function(){return M(T,i,C).call(i,t,r)}}},{key:"loadJson",value:function(t,e){var n,i=this;S(P,this,(n=x(P,this),++n)),this.assetLoadingInterface.setAssetsLimitCount(x(P,this)),fetch(e).then((function(t){return t.json()})).then((function(e){return M(T,i,A).call(i,t,e)})).catch((function(t){return console.error("Lỗi tải JSON từ ".concat(e,":"),t)}))}},{key:"getImage",value:function(t){var e=x(I,this).images[t];return e||console.warn('Hình ảnh với tên "'.concat(t,'" không tồn tại')),e}},{key:"getJson",value:function(t){var e=x(I,this).json[t];return e||console.warn('JSON với tên "'.concat(t,'" không tồn tại')),e}},{key:"onAllAssetsLoaded",value:function(t){S(j,this,t)}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function C(t,e){x(I,this).images[t]&&console.warn('Hình ảnh với tên "'.concat(t,'" đã được thêm vào từ trước. Bạn thêm lại sẽ ghi đè lên nó.')),x(I,this).images[t]=e,M(T,this,L).call(this,t)}function A(t,e){x(I,this).json[t]&&console.warn('JSON với tên "'.concat(t,'" đã được thêm vào từ trước. Bạn thêm lại sẽ ghi đè lên nó.')),x(I,this).json[t]=e,M(T,this,L).call(this,t)}function L(t){var e;S(E,this,(e=x(E,this),++e)),this.assetLoadingInterface.setLoadedAssetsText(t),this.assetLoadingInterface.setAssetsLoadedCount(x(E,this)),x(E,this)===x(P,this)&&x(j,this)&&x(j,this).call(this)}function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,O(i.key),i)}}function O(t){var e=function(t){if("object"!=z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:e+""}function R(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function B(t,e){return t.get(q(t,e))}function D(t,e,n){return t.set(q(t,e),n),n}function q(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var F=new WeakMap,X=new WeakMap,Y=new WeakMap,J=new WeakMap,G=new WeakMap,K=new WeakMap,N=new WeakMap,U=new WeakMap,$=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,F,0),R(this,X,0),R(this,Y,0),R(this,J,165),R(this,G,90),R(this,K,30),R(this,N,null),R(this,U,null)},e=[{key:"withLocation",value:function(t,e){return D(F,this,t),D(X,this,e),this}},{key:"withAngle",value:function(t){return D(Y,this,t),this}},{key:"withSpeed",value:function(t){return D(J,this,t),this}},{key:"withSize",value:function(t,e){return D(G,this,t),D(K,this,e),this}},{key:"withImage",value:function(t){return D(N,this,t),this}},{key:"withCollisionImage",value:function(t){return D(U,this,t),this}},{key:"x",get:function(){return B(F,this)}},{key:"y",get:function(){return B(X,this)}},{key:"angle",get:function(){return B(Y,this)}},{key:"speed",get:function(){return B(J,this)}},{key:"width",get:function(){return B(G,this)}},{key:"height",get:function(){return B(K,this)}},{key:"image",get:function(){return B(N,this)}},{key:"collisionImage",get:function(){return B(U,this)}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];D(F,this,B(F,this)+Math.cos(B(Y,this))*B(J,this)),D(X,this,B(X,this)+Math.sin(B(Y,this))*B(J,this)),t.save(),t.translate(B(F,this),B(X,this)),t.rotate(B(Y,this)),t.drawImage(B(N,this),-B(G,this)/2,-B(K,this)/2,B(G,this),B(K,this)),t.restore(),e&&(t.save(),t.translate(B(F,this),B(X,this)),t.rotate(B(Y,this)),t.strokeStyle="blue",t.strokeRect(-B(G,this)/2,-B(K,this)/2,B(G,this),B(K,this)),t.restore())}}],e&&H(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,V(i.key),i)}}function V(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}var Z=function(){return t=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:40;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.duration=n,this.startTime=Date.now(),this.image=i,this.maxWidth=r,this.maxHeight=o,this.radius=10,this.calculateCollisionPoint(e)},(e=[{key:"calculateCollisionPoint",value:function(t){var e=t.angle,n=t.width/2,i=t.height/2,r=Math.cos(e)*n,o=Math.sin(e)*i;this.collisionX=t.x+r,this.collisionY=t.y+o}},{key:"isExpired",value:function(){return Date.now()-this.startTime>this.duration}},{key:"draw",value:function(t){if(!this.isExpired()){var e,n=(Date.now()-this.startTime)/this.duration,i=1+.5*n;if(e=n<=.45?1:1-(n-.45)/.55,t.save(),t.globalAlpha=e,t.translate(this.collisionX,this.collisionY),t.scale(i,i),t.translate(-this.collisionX,-this.collisionY),this.image){var r=this.image.width/this.image.height,o=this.image.width,a=this.image.height;o>this.maxWidth&&(a=(o=this.maxWidth)/r),a>this.maxHeight&&(o=(a=this.maxHeight)*r),t.drawImage(this.image,this.collisionX-o/2,this.collisionY-a/2,o,a)}else t.fillStyle="red",t.beginPath(),t.arc(this.collisionX,this.collisionY,this.radius,0,2*Math.PI),t.fill();t.restore()}}}])&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nt(i.key),i)}}function nt(t){var e=function(t){if("object"!=tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tt(e)?e:e+""}function it(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function rt(t,e){return t.get(at(t,e))}function ot(t,e,n){return t.set(at(t,e),n),n}function at(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var st=new WeakMap,ht=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap,ft=new WeakMap,yt=function(){return t=function t(e){var n=e.x,i=e.y,r=e.width,o=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,st,void 0),it(this,ht,void 0),it(this,lt,void 0),it(this,ut,void 0),it(this,ct,void 0),it(this,ft,void 0),ot(st,this,n),ot(ht,this,i),ot(lt,this,r),ot(ut,this,o)},(e=[{key:"x",get:function(){return rt(st,this)}},{key:"y",get:function(){return rt(ht,this)}},{key:"width",get:function(){return rt(lt,this)}},{key:"height",get:function(){return rt(ut,this)}},{key:"mapWidth",get:function(){return rt(ct,this)}},{key:"mapHeight",get:function(){return rt(ft,this)}},{key:"setSize",value:function(t){var e=t.width,n=t.height;ot(lt,this,e),ot(ut,this,n)}},{key:"setMapSize",value:function(t){var e=t.width,n=t.height;ot(ct,this,e),ot(ft,this,n)}},{key:"update",value:function(t,e){ot(st,this,t-rt(lt,this)/2),ot(ht,this,e-rt(ut,this)/2),this.clamp()}},{key:"apply",value:function(t){t.translate(-rt(st,this),-rt(ht,this))}},{key:"clamp",value:function(){ot(st,this,Math.max(0,Math.min(rt(st,this),rt(ct,this)-rt(lt,this)))),ot(ht,this,Math.max(0,Math.min(rt(ht,this),rt(ft,this)-rt(ut,this))))}}])&&et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,dt(i.key),i)}}function dt(t){var e=function(t){if("object"!=pt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pt(e)?e:e+""}function gt(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function vt(t,e){return t.get(bt(t,e))}function wt(t,e,n){return t.set(bt(t,e),n),n}function bt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var kt=new WeakMap,St=new WeakMap,xt=function(){return t=function t(e){var n=e.location,i=n.x,r=n.y,o=e.display,a=o.width,s=o.height,h=o.color;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gt(this,kt,void 0),gt(this,St,void 0),wt(kt,this,{x:i,y:r}),wt(St,this,{width:a,height:s,color:null!=h?h:"black"})},(e=[{key:"x",get:function(){return vt(kt,this).x}},{key:"y",get:function(){return vt(kt,this).y}},{key:"width",get:function(){return vt(St,this).width}},{key:"height",get:function(){return vt(St,this).height}},{key:"draw",value:function(t){var e=vt(kt,this),n=e.x,i=e.y,r=vt(St,this),o=r.width,a=r.height,s=r.color;t.save(),t.fillStyle=s,t.fillRect(n,i,o,a),t.restore()}}])&&mt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function It(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Pt(i.key),i)}}function Pt(t){var e=function(t){if("object"!=Mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mt(e)?e:e+""}function Et(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function jt(t,e,n){return t.set(Wt(t,e),n),n}function Tt(t,e){return t.get(Wt(t,e))}function Wt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ct=new WeakMap,At=new WeakMap,Lt=new WeakMap,zt=function(){return t=function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,Ct,{width:0,height:0}),Et(this,At,void 0),Et(this,Lt,[]),Object.assign(Tt(Ct,this),{width:e,height:n}),jt(Lt,this,i),jt(At,this,r)},(e=[{key:"walls",get:function(){return Tt(Lt,this)}},{key:"size",get:function(){return Tt(Ct,this)}},{key:"backgroundImage",get:function(){return Tt(At,this)}},{key:"draw",value:function(t){Tt(Lt,this).forEach((function(e){return e.draw(t)}))}}])&&It(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Rt(i.key),i)}}function Rt(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}function Bt(t,e,n){Dt(t,e),e.set(t,n)}function Dt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qt(t,e){return t.get(Ft(t,e))}function Ft(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Xt=new WeakMap,Yt=new WeakMap,Jt=new WeakSet,Gt=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Dt(this,e=Jt),e.add(this),Bt(this,Xt,{"Demo map":{size:{width:2e3,height:2e3},walls:[{x:500,y:500,width:100,height:300},{x:800,y:200,width:200,height:100},{x:1e3,y:700,width:300,height:100},{x:200,y:800,width:100,height:400}]},"01":{originalSize:{width:2560,height:1940},size:{width:2560/1.2,height:1940/1.2},walls:[],obstacles:[]}}),Bt(this,Yt,{}),Ft(Jt,this,Kt).call(this)},(e=[{key:"getMap",value:function(t){return qt(Yt,this)[t]}}])&&Ot(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Kt(){var t=qt(Xt,this);for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e],i=n.size,r=i.width,o=i.height,a=n.walls;qt(Yt,this)[e]=new zt(r,o,a.map((function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=t.color;return new xt({location:{x:e,y:n},display:{width:i,height:r,color:o}})})))}}const Nt=function(t){return t*Math.PI/180},Ut=function(t){return(t%360+360)%360};function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,te(i.key),i)}}function Zt(t,e,n){return e&&Vt(t.prototype,e),n&&Vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function te(t){var e=function(t){if("object"!=$t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:e+""}function ee(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function ne(t,e,n){return t.set(re(t,e),n),n}function ie(t,e){return t.get(re(t,e))}function re(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var oe=new WeakMap,ae=new WeakMap,se=new WeakMap,he=new WeakMap,le=new WeakMap,ue=new WeakMap,ce=new WeakMap,fe=function(){return Zt((function t(){Qt(this,t),ee(this,oe,!1),ee(this,ae,{x:0,y:0}),ee(this,se,{radius:75,rotate:0,headRotate:0,width:150,height:150}),ee(this,he,{headImage:void 0,bodyImage:void 0,bulletImage:void 0,collisionImage:null}),ee(this,le,{hp:0,maxHp:0,atk:0,pen:0,armor:0,speed:0,bulletRange:0,bulletSpeed:0}),ee(this,ue,{}),ee(this,ce,[])}),[{key:"dead",get:function(){return ie(oe,this)},set:function(t){ne(oe,this,t),ie(oe,this)||this.revive()}},{key:"currentHp",get:function(){return ie(le,this).hp},set:function(t){var e=this,n=t-ie(le,this).hp,i=this.x,r=this.y;if(0!==n){var o=(n>0?"+":"")+n,a=n>0?"rgb(0, 180, 0)":"rgb(255, 0, 0)",s=Math.PI/4+Math.random()*Math.PI/2;ie(ce,this).push(new ye(o,a,i,r,s,.155*ie(se,this).height))}ie(le,this).hp=t,this.currentHp<=0&&(ne(oe,this,!0),setTimeout((function(){return e.revive()}),3e3))}},{key:"maxHp",get:function(){return ie(le,this).maxHp},set:function(t){ie(le,this).maxHp=t}},{key:"x",get:function(){return ie(ae,this).x},set:function(t){ie(ae,this).x=t}},{key:"y",get:function(){return ie(ae,this).y},set:function(t){ie(ae,this).y=t}},{key:"radius",get:function(){return ie(se,this).radius}},{key:"speed",get:function(){return ie(le,this).speed}},{key:"bulletImage",get:function(){return ie(he,this).bulletImage}},{key:"collisionImage",get:function(){return ie(he,this).collisionImage}},{key:"rotate",get:function(){return ie(se,this).rotate},set:function(t){ie(se,this).rotate=t}},{key:"headRotate",get:function(){return ie(se,this).headRotate},set:function(t){ie(se,this).headRotate=t}},{key:"atk",get:function(){return ie(le,this).atk}},{key:"setKeyPressedState",value:function(t,e){ie(ue,this)[t]=e}},{key:"withLocation",value:function(t,e){return ne(ae,this,{x:t,y:e}),this}},{key:"withDisplay",value:function(t,e,n){return ne(se,this,{radius:t,rotate:e,headRotate:n}),ie(se,this).width=2*t,ie(se,this).height=2*t,this}},{key:"withTankImage",value:function(t){var e=t.headImage,n=t.bodyImage,i=t.bulletImage,r=t.collisionImage;return ne(he,this,{headImage:e,bodyImage:n,bulletImage:i,collisionImage:r}),this}},{key:"withStats",value:function(t){var e=t.hp,n=t.atk,i=t.pen,r=t.armor,o=t.speed,a=t.bulletRange,s=t.bulletSpeed;return ne(le,this,{hp:e,maxHp:e,atk:n,pen:i,armor:r,speed:o,bulletRange:a,bulletSpeed:s}),this}},{key:"revive",value:function(){ne(oe,this,!1),ie(le,this).hp=ie(le,this).maxHp}},{key:"heal",value:function(t){this.currentHp+=Math.min(this.maxHp-this.currentHp,parseInt(t))}},{key:"move",value:function(t){Date.now();var e=ie(le,this).speed,n=ie(ue,this),i=0,r=0;(n.w||n.ArrowUp)&&(r-=1),(n.a||n.ArrowLeft)&&(i-=1),(n.s||n.ArrowDown)&&(r+=1),(n.d||n.ArrowRight)&&(i+=1);var o=Math.sqrt(i*i+r*r);if(0!==o){i=i/o*e*.024,r=r/o*e*.024;var a=Math.atan2(r,i)*(180/Math.PI),s=e/16,h=Ut(a-ie(se,this).rotate);h>180?h-=360:h<-180&&(h+=360),Math.abs(h)<s?ie(se,this).rotate=a:ie(se,this).rotate+=s*Math.sign(h),ie(se,this).rotate=Ut(ie(se,this).rotate)}this.x+=i,this.y+=r,t.update(this.x,this.y)}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ie(ae,this),i=n.x,r=n.y,o=ie(se,this),a=o.radius,s=o.width,h=o.height,l=o.rotate,u=o.headRotate,c=ie(he,this),f=c.headImage,y=c.bodyImage;t.save(),t.translate(i,r),t.rotate(Nt(l)),t.shadowOffsetX=0,t.shadowOffsetY=90===Ut(l)?-12:10,t.shadowBlur=14,t.shadowColor="rgba(0, 0, 0, 0.6)",t.drawImage(y,-s/2,-h/2,s,h),t.restore(),t.save(),t.translate(i,r),t.rotate(u),t.drawImage(f,-s/2,-h/2,s,h),t.restore(),ne(ce,this,ie(ce,this).filter((function(e){var n=e.update();return e.draw(t),!n}))),e&&(t.save(),t.translate(i,r),t.strokeStyle="white",t.beginPath(),t.arc(0,0,a,0,2*Math.PI),t.stroke(),t.restore())}},{key:"drawHPBar",value:function(t,e,n){var i=ie(ae,this),r=i.x,o=i.y,a=ie(se,this),s=a.width,h=a.height,l=ie(le,this),u=l.hp,c=l.maxHp,f=.7*s,y=.1*h,p=r-f/2,m=o+this.radius+10,d=u/c*f;t.save(),t.beginPath(),t.strokeStyle="#666",t.lineWidth=2,t.roundRect(p-1,m-1,f+2,y+2,4),t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle="rgba(0, 0, 0, .6)",t.lineWidth=1,t.roundRect(p,m,f,y,4),t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle="rgba(0, 0, 0, .8)",t.lineWidth=1,t.roundRect(p-2.5,m-2.5,f+5,y+5,4),t.stroke(),t.closePath();var g=t.createLinearGradient(p,m,p,m+y);g.addColorStop(0,"rgba(0, 0, 0, .5)"),g.addColorStop(.5,"rgba(0, 0, 0, .5)"),g.addColorStop(1,this.darkenColor("rgba(0, 0, 0, .5)",.5)),t.fillStyle=g,t.beginPath(),t.roundRect(p+.5,m+.5,f-1,y-1,0),t.fill(),t.closePath();var v=t.createLinearGradient(p,m,p,m+y);v.addColorStop(0,e),v.addColorStop(.5,e),v.addColorStop(1,this.darkenColor(e,.5)),t.fillStyle=v;for(var w=0;w<9;w++)t.beginPath(),t.roundRect(p+.5,m+.5,d-1,y-1,0),t.fill(),t.closePath();if(c<7501)for(var b=0;b<9;b++){t.strokeStyle="black";for(var k=f/(c/500),S=1;S<c/500;S++){var x=p+S*k;t.beginPath(),t.moveTo(x,m+1),t.lineTo(x,m+y-.4*y),t.stroke()}}for(var M=0;M<9;M++){t.fillStyle=e,t.font="Bold ".concat(.155*h,'px "Montserrat", sans-serif'),t.textAlign="center",t.textBaseline="top";var I=m+y+10;t.fillText(n,r,I)}t.restore()}},{key:"darkenColor",value:function(t,e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],h=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;h=!1}else for(;!(h=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);h=!0);}catch(t){l=!0,r=t}finally{try{if(!h&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _t(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.match(/\d+/g).map(Number),3),i=n[0],r=n[1],o=n[2];return"rgb(".concat(Math.max(i-255*e,0),", ").concat(Math.max(r-255*e,0),", ").concat(Math.max(o-255*e,0),")")}}])}(),ye=function(){return Zt((function t(e,n,i,r,o,a){Qt(this,t),this.value=e,this.color=n,this.x=i,this.y=r,this.angle=o,this.fontSize=a,this.speed=2,this.duration=500,this.startTime=Date.now()}),[{key:"update",value:function(){return this.x-=Math.cos(this.angle)*this.speed,this.y-=Math.sin(this.angle)*this.speed,Date.now()-this.startTime>this.duration}},{key:"draw",value:function(t){for(var e=0;e<9;e++)t.save(),t.globalAlpha=this.opacity,t.fillStyle=this.color,t.font="".concat(this.fontSize,'px "Montserrat", sans-serif'),t.textAlign="center",t.fillText(this.value,this.x,this.y),t.restore()}}])}();function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function de(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ge(i.key),i)}}function ge(t){var e=function(t){if("object"!=pe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pe(e)?e:e+""}function ve(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function we(t,e){return t.get(ke(t,e))}function be(t,e,n){return t.set(ke(t,e),n),n}function ke(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Se=new WeakMap,xe=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Pe=new WeakMap,Ee=new WeakMap,je=new WeakMap,Te=new WeakMap,We=new WeakMap,Ce=new WeakMap,Ae=function(){return t=function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),ve(this,Se,void 0),ve(this,xe,void 0),ve(this,Me,void 0),ve(this,Ie,void 0),ve(this,Pe,void 0),ve(this,Ee,void 0),ve(this,je,{tanks:{allies:[],enemies:[],player:void 0},bullets:[],collisionEffects:[],map:void 0}),ve(this,Te,{drawBorder:!1,log:!0,gameContainerSize:{widthRatio:1,heightRatio:1}}),ve(this,We,{drawMap:function(){},drawTanks:function(){var t=we(je,e).tanks;t.allies.forEach((function(t,n){t.dead||(t.drawHPBar(we(xe,e),"rgb(60, 150, 255)","Ally ".concat(n+1)),t.draw(we(xe,e),we(Te,e).drawBorder))})),t.enemies.forEach((function(t,n){t.dead||(t.drawHPBar(we(xe,e),"rgb(255, 0, 0)","Enemy ".concat(n+1)),t.draw(we(xe,e),we(Te,e).drawBorder))})),t.player.dead||(t.player.drawHPBar(we(xe,e),"rgb(0, 180, 0)","Player"),t.player.draw(we(xe,e),we(Te,e).drawBorder))},drawBullet:function(){var t=we(je,e),n=t.bullets,i=t.tanks,r=t.collisionEffects,o=t.map.walls,a=t.map;n.forEach((function(t,s){t.draw(we(xe,e),we(Te,e).drawBorder),i.enemies.forEach((function(o){!o.dead&&we(Ce,e).isBulletAndTankCollision(o,t)&&(we(Te,e).log&&console.log("Hit tank detected!"),r.push(new Z(t,200,t.collisionImage)),n.splice(s,1),o.currentHp-=i.player.atk,Math.random()<.25&&o.heal(.1*(o.maxHp-o.currentHp)),i.player.currentHp-=parseInt(.15*i.player.atk),Math.random()<.25&&i.player.heal(.1*(i.player.maxHp-i.player.currentHp)))})),o.some((function(n){return we(Ce,e).isBulletAndWallCollision(t,n)}))?(we(Te,e).log&&console.log("Hit wall detected!"),r.push(new Z(t,200,t.collisionImage)),n.splice(s,1)):(t.x<0||t.x>a.size.width||t.y<0||t.y>a.size.height)&&(we(Te,e).log&&console.log("Bullet out of map, remove"),n.splice(s,1))}))},drawCollisionEffect:function(){var t=we(je,e).collisionEffects;t.forEach((function(t){return t.draw(we(xe,e))})),t=t.filter((function(t){return!t.isExpired()}))}}),ve(this,Ce,{isBulletAndTankCollision:function(t,e){return function(t,e){for(var n=Math.cos(e.angle),i=Math.sin(e.angle),r=e.width/2,o=e.height/2,a=0,s=[{x:e.x+r*n-o*i,y:e.y+r*i+o*n},{x:e.x-r*n-o*i,y:e.y-r*i+o*n},{x:e.x-r*n+o*i,y:e.y-r*i-o*n},{x:e.x+r*n+o*i,y:e.y+r*i-o*n}];a<s.length;a++){var h=s[a],l=h.x-t.x,u=h.y-t.y;if(l*l+u*u<=t.radius*t.radius)return!0}var c=n*(t.x-e.x)+i*(t.y-e.y)+e.x,f=n*(t.y-e.y)-i*(t.x-e.x)+e.y,y=c-Math.max(e.x-r,Math.min(c,e.x+r)),p=f-Math.max(e.y-o,Math.min(f,e.y+o));return y*y+p*p<=t.radius*t.radius}(t,e)},isBulletAndWallCollision:function(t,e){return function(t,e){for(var n=Math.cos(t.angle),i=Math.sin(t.angle),r=t.width/2,o=t.height/2,a=0,s=[{x:t.x+r*n-o*i,y:t.y+r*i+o*n},{x:t.x-r*n-o*i,y:t.y-r*i+o*n},{x:t.x-r*n+o*i,y:t.y-r*i-o*n},{x:t.x+r*n+o*i,y:t.y+r*i-o*n}];a<s.length;a++){var h=s[a];if(h.x>=e.x&&h.x<=e.x+e.width&&h.y>=e.y&&h.y<=e.y+e.height)return!0}for(var l=0,u=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];l<u.length;l++){var c=u[l],f=n*(c.x-t.x)+i*(c.y-t.y)+t.x,y=-i*(c.x-t.x)+n*(c.y-t.y)+t.y;if(f>=t.x-r&&f<=t.x+r&&y>=t.y-o&&y<=t.y+o)return!0}return!1}(t,e)}}),be(Se,this,document.createElement("canvas")),be(xe,this,we(Se,this).getContext("2d")),document.body.appendChild(we(Se,this)),be(Ee,this,new Gt),be(Pe,this,new yt({x:0,y:0,width:we(Se,this).width,height:we(Se,this).height})),be(Ie,this,new d(we(Se,this),we(xe,this))),be(Me,this,new W(we(Ie,this))),we(Ie,this).start(),this.resize(),window.addEventListener("resize",(function(){return e.resize()})),window.addEventListener("scroll",(function(t){return t.preventDefault()})),this.loadAssets()},e=[{key:"resize",value:function(){var t=we(Se,this).parentElement,e=we(Te,this).gameContainerSize,n=e.widthRatio,i=e.heightRatio;we(Se,this).width=t.clientWidth*n,we(Se,this).height=t.clientHeight*i,we(Pe,this).setSize(we(Se,this));var r=we(je,this).tanks;r.player&&we(Pe,this).update(r.player.x,r.player.y)}},{key:"loadAssets",value:function(){var t=this;we(Me,this).onAllAssetsLoaded((function(){return t.onAllAssetsLoaded()})),we(Me,this).loadImage("tank.demo.head","assets/images/tanks/demo/head.png"),we(Me,this).loadImage("tank.demo.body","assets/images/tanks/demo/body.png"),we(Me,this).loadImage("tank.demo.bullet","assets/images/tanks/demo/bullet.png"),we(Me,this).loadImage("tank.demo.collision","assets/images/tanks/demo/collision.png"),we(Me,this).loadImage("map.01","assets/images/maps/map-01/bg.jpeg"),we(Me,this).loadImage("map.01.layer2","assets/images/maps/map-01/bg_layer2.png")}},{key:"onAllAssetsLoaded",value:function(){var t=this;this.buildGameEnv();var e=we(je,this).tanks.player;document.addEventListener("keydown",(function(t){e.setKeyPressedState(t.key,!0)})),document.addEventListener("keyup",(function(t){e.setKeyPressedState(t.key,!1)})),we(Se,this).addEventListener("contextmenu",(function(t){return t.preventDefault()})),we(Se,this).addEventListener("mousemove",(function(e){return t.handleMouseMove(e)})),we(Se,this).addEventListener("click",(function(e){return t.handleClick(e)})),we(Ie,this).complete(),this.resize(),this.draw(),setInterval((function(){we(je,t).tanks.enemies.forEach((function(t){t.heal(.1*(t.maxHp-t.currentHp))})),we(je,t).tanks.player.heal(.1*(we(je,t).tanks.player.maxHp-we(je,t).tanks.player.currentHp))}),1500),setInterval((function(){we(je,t).collisionEffects=we(je,t).collisionEffects.filter((function(t){return!t.isExpired()})),we(Te,t).log&&console.log("Expired collision effect cleared",we(je,t).collisionEffects)}),5e3)}},{key:"buildGameEnv",value:function(){var t=we(je,this),e=we(Me,this),n=(new fe).withLocation(200,1e3).withDisplay(75,0,0).withTankImage({headImage:e.getImage("tank.demo.head"),bodyImage:e.getImage("tank.demo.body"),bulletImage:e.getImage("tank.demo.bullet"),collisionImage:e.getImage("tank.demo.collision")}).withStats({hp:3981,atk:286,pen:20,armor:40,speed:170}),i=(new fe).withLocation(1e3,700).withDisplay(75,90,0).withTankImage({headImage:e.getImage("tank.demo.head"),bodyImage:e.getImage("tank.demo.body"),bulletImage:e.getImage("tank.demo.bullet"),collisionImage:e.getImage("tank.demo.collision")}).withStats({hp:9533,atk:186,pen:10,armor:40,speed:15}),r=(new fe).withLocation(990,900).withDisplay(75,40,0).withTankImage({headImage:e.getImage("tank.demo.head"),bodyImage:e.getImage("tank.demo.body"),bulletImage:e.getImage("tank.demo.bullet"),collisionImage:e.getImage("tank.demo.collision")}).withStats({hp:5981,atk:186,pen:10,armor:40,speed:15}),o=(new fe).withLocation(300,300).withDisplay(75,180).withTankImage({headImage:e.getImage("tank.demo.head"),bodyImage:e.getImage("tank.demo.body"),bulletImage:e.getImage("tank.demo.bullet"),collisionImage:e.getImage("tank.demo.collision")}).withStats({hp:2981,atk:186,pen:10,armor:40,speed:15});t.map=we(Ee,this).getMap("01"),we(Pe,this).setMapSize(t.map.size),t.tanks.player=n,t.tanks.enemies.push(i,r),t.tanks.allies.push(o),we(Pe,this).apply(we(xe,this)),we(Pe,this).update(n.x,n.y)}},{key:"handleClick",value:function(t){var e,n,i=we(je,this).tanks,r=we(Se,this).getBoundingClientRect(),o=t.clientX-r.left,a=t.clientY-r.top,s=o+we(Pe,this).x,h=a+we(Pe,this).y,l=s-i.player.x,u=h-i.player.y,c=Math.atan2(u,l),f=[[0],[0,-15,15],[0,-10,10,-20,20],[0,60,-60,120,-120,-180],[0,30,-30,60,-60,90,-90,120,-120,150,-150,180]][parseInt(5*Math.random())];(e=we(je,this).bullets).push.apply(e,function(t){if(Array.isArray(t))return me(t)}(n=f.map((function(t){return(new $).withLocation(i.player.x,i.player.y).withAngle(Nt((e=c,e/Math.PI*180+t))).withSpeed(15).withSize(100,100/3).withImage(i.player.bulletImage).withCollisionImage(i.player.collisionImage);var e})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),we(Pe,this).update(i.player.x,i.player.y)}},{key:"handleMouseMove",value:function(t){var e=we(je,this).tanks,n=we(Se,this).getBoundingClientRect(),i=t.clientX-n.left,r=t.clientY-n.top,o=i+we(Pe,this).x,a=r+we(Pe,this).y,s=o-e.player.x,h=a-e.player.y;e.player.headRotate=Math.atan2(h,s)}},{key:"draw",value:function(){var t=this,e=we(je,this).map.size,n=e.width,i=e.height,r=we(Se,this),o=r.width,a=r.height;we(xe,this).clearRect(0,0,o,a),we(xe,this).save(),we(Pe,this).apply(we(xe,this)),we(xe,this).drawImage(we(Me,this).getImage("map.01"),0,0,n,i),we(We,this).drawTanks(),we(We,this).drawMap(),we(We,this).drawBullet(),we(We,this).drawCollisionEffect(),we(je,this).tanks.player.move(we(Pe,this)),we(xe,this).restore(),requestAnimationFrame((function(){return t.draw()}))}}],e&&de(t.prototype,e),n&&de(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Le(t){"development"!=t?document.getElementById("start").addEventListener("click",(function(t){var e,n;t.target.style.display="none",/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&((n=document.querySelector("meta[name=viewport]"))||((n=document.createElement("meta")).name="viewport",document.head.appendChild(n)),n.content="width=device-width, initial-scale=".concat(.4,", maximum-scale=").concat(.4,", user-scalable=no")),(e=document.documentElement).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation&&screen.orientation.lock?screen.orientation.lock("landscape").catch((function(t){console.error("Khóa màn hình ngang thất bại:",t)})):alert("Thiết bị của bạn không hỗ trợ khóa màn hình."),new Ae})):(document.getElementById("start").style.display="none",new Ae)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Le):Le("development")})();